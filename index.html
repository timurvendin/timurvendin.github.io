<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>üé∞ Wienau –°–ª–æ—Ç-–º–∞—à–∏–Ω–∞ üé∞</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background: #222;
      color: white;
    }

    h1 {
      margin-top: 30px;
    }

    .slot-machine {
      display: flex;
      justify-content: center;
      margin: 30px auto;
    }

    .reel-container {
      width: 80px;
      height: 240px; /* 3 —Å–∏–º–≤–æ–ª–∞ –ø–æ 80px */
      border: 4px solid #888;
      border-radius: 15px;
      background: #444;
      margin: 0 10px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 4px 15px rgba(0,0,0,0.4);
    }

    .reel {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      transition: top 0.5s ease-out;
    }

    .symbol {
      width: 100%;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .symbol span {
      font-size: 50px;
    }

    .symbol img {
      max-width: 60px;
      max-height: 60px;
	  object-fit: contain; /* –í–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ 60x60, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
    }

    button {
      padding: 10px 25px;
      font-size: 18px;
      margin: 10px;
      cursor: pointer;
      background-color: gold;
      border: none;
      border-radius: 10px;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    button:hover {
      background-color: orange;
    }

    .result {
      margin-top: 20px;
      font-size: 22px;
    }

    .balance {
      font-size: 20px;
      margin-top: 15px;
    }

    .highlight {
      border: 2px solid gold;
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <h1>üé∞ Wienau –°–ª–æ—Ç-–º–∞—à–∏–Ω–∞ üé∞</h1>

  <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">100</span> üí∞</div>

  <div class="slot-machine">
    <div class="reel-container"><div class="reel" id="reel1"></div></div>
    <div class="reel-container"><div class="reel" id="reel2"></div></div>
    <div class="reel-container"><div class="reel" id="reel3"></div></div>
  </div>

  <button onclick="spin()">–ö—Ä—É—Ç–∏—Ç—å –∑–∞ 10 üí∞</button>
  <button onclick="deposit()">–î–æ–¥–µ–ø +150 üí∞</button>

  <div class="result" id="result"></div>

  <audio id="spinSound" src="play.m4a" preload="auto"></audio>

  <script>
    const emojis = ["üçí", "üçã", "üíé"]; // "üçì", "üçâ", "üçç", "üçá", "üîî", "‚≠ê", "üçå"
    const images = ["img/roma.png", "img/oleksa.png", "img/raclet.png", "img/timur.png", "img/Joint.webp"];
    const allSymbols = [...images]; // ...emojis, 

    const reelEls = [
      document.getElementById("reel1"),
      document.getElementById("reel2"),
      document.getElementById("reel3")
    ];

    const resultEl = document.getElementById("result");
    const balanceDisplay = document.getElementById("balance");
    const audio = document.getElementById("spinSound");

    let balance = 100;
    const spinCost = 10;
    const winMultiplier = 5;

    let spinningIntervals = [];

    function updateBalanceDisplay() {
      balanceDisplay.textContent = balance;
    }

    function getRandomSymbol() {
      return allSymbols[Math.floor(Math.random() * allSymbols.length)];
    }

    function createSymbolElement(symbol) {
      const wrapper = document.createElement("div");
      wrapper.className = "symbol";

      if (symbol.startsWith("img/")) {
        const img = document.createElement("img");
        img.src = symbol;
        wrapper.appendChild(img);
      } else {
        const span = document.createElement("span");
        span.textContent = symbol;
        wrapper.appendChild(span);
      }

      return wrapper;
    }

    function spin() {
      if (balance < spinCost) {
        resultEl.textContent = "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å!";
        return;
      }

      spinningIntervals.forEach(clearInterval);
      spinningIntervals = [];

      balance -= spinCost;
      updateBalanceDisplay();
      resultEl.textContent = "–ö—Ä—É—Ç–∏–º...";

      const finalSymbols = [];

      reelEls.forEach((reelEl, index) => {
        reelEl.innerHTML = "";
        reelEl.style.transition = "none";
        reelEl.style.top = "0px";

        let pos = 0;

        const spinInterval = setInterval(() => {
          const symbol = getRandomSymbol();
          const el = createSymbolElement(symbol);
          reelEl.appendChild(el);
          pos++;

          // –æ–≥—Ä–∞–Ω–∏—á–∏–º DOM 
          if (pos > 30) {
            reelEl.removeChild(reelEl.firstChild);
          }

          reelEl.style.top = `-${(reelEl.children.length - 3) * 80}px`;
        }, 80 + index * 20);

        spinningIntervals.push(spinInterval);
      });

      audio.currentTime = 0;
      audio.play();

      audio.onended = () => {
        spinningIntervals.forEach(clearInterval);
        spinningIntervals = [];

        reelEls.forEach((reelEl, index) => {
          const symbol = getRandomSymbol();
          const el = createSymbolElement(symbol);
          reelEl.appendChild(el);
          reelEl.style.transition = `top 0.5s ease-out`;
          reelEl.style.top = `-${(reelEl.children.length - 3) * 80}px`;

          // –î–æ–±–∞–≤–∏–º –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤—ã–∏–≥—Ä—ã—à–∞
          setTimeout(() => {
            const centralIndex = reelEl.children.length - 2;
            const centralSymbolEl = reelEl.children[centralIndex];
            const symbol = centralSymbolEl.querySelector("img")?.src || centralSymbolEl.textContent;
            finalSymbols[index] = symbol;

            if (index === 2) {
              setTimeout(() => {
                checkWin(finalSymbols);
              }, 300);
            }
          }, 600);
        });
      };
    }

    function checkWin(symbols) {
      const [a, b, c] = symbols;
      if (a === b && b === c) {
        const winAmount = spinCost * winMultiplier;
        balance += winAmount;
        updateBalanceDisplay();
        resultEl.textContent = `üéâ –í–´–ò–ì–†–´–®! +${winAmount} üí∞`;
      } else {
        resultEl.textContent = `üò¢ –ù–µ –ø–æ–≤–µ–∑–ª–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞!`;
      }
    }

    function deposit() {
      balance += 150;
      updateBalanceDisplay();
      resultEl.textContent = "üí≥ –ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ 150!";
    }
  </script>

</body>
</html>
